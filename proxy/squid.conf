# Allowed domains (one per line in the allowlist file)
acl allowed_domains dstdomain "/etc/squid/allowlist.txt"

# Allow CONNECT (HTTPS) only to allowed domains
acl SSL_ports port 443
acl CONNECT method CONNECT
http_access allow CONNECT allowed_domains SSL_ports

# Allow HTTP to allowed domains
http_access allow allowed_domains

# Block everything else
http_access deny all

# Listen on port 3128
http_port 3128

# Don't cache anything
cache deny all
